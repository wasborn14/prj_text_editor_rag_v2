# ãƒ¢ãƒã‚¤ãƒ«ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ‡ã‚¶ã‚¤ãƒ³å¯¾å¿œãƒ—ãƒ©ãƒ³

## ç¾çŠ¶åˆ†æ

### ç¾åœ¨ã®å•é¡Œç‚¹

1. **å›ºå®šãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**
   - ã‚µã‚¤ãƒ‰ãƒãƒ¼ã€ã‚¨ãƒ‡ã‚£ã‚¿ã€RAGãƒ‘ãƒãƒ«ãŒå¸¸ã«æ¨ªä¸¦ã³
   - ãƒ¢ãƒã‚¤ãƒ«ç”»é¢ã§ã¯3ã‚«ãƒ©ãƒ ãŒåã¾ã‚‰ãªã„
   - å›ºå®šå¹…ï¼ˆSidebar: 300px, RAGPanel: 400pxï¼‰ãŒãƒ¢ãƒã‚¤ãƒ«ã«ä¸é©åˆ‡

2. **PCå‰æã®UIè¦ç´ **
   - ãƒ˜ãƒƒãƒ€ãƒ¼ã«ã™ã¹ã¦ã®æƒ…å ±ã‚’è¡¨ç¤ºï¼ˆãƒªãƒã‚¸ãƒˆãƒªåã€ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ãªã©ï¼‰
   - ãƒ¢ãƒã‚¤ãƒ«ã§ã¯æ¨ªå¹…ãŒè¶³ã‚Šãšã€ãƒ†ã‚­ã‚¹ãƒˆãŒåˆ‡ã‚Œã‚‹
   - ãƒœã‚¿ãƒ³ãŒå°ã•ã™ãã¦ã‚¿ãƒƒãƒ—ã—ã«ãã„

3. **ã‚¿ãƒƒãƒæ“ä½œã¸ã®éå¯¾å¿œ**
   - ãƒã‚¦ã‚¹ãƒ›ãƒãƒ¼ã«ä¾å­˜ã—ãŸUIï¼ˆå³ã‚¯ãƒªãƒƒã‚¯ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‰
   - ãƒªã‚µã‚¤ã‚ºãƒãƒ³ãƒ‰ãƒ«ãŒãƒ‰ãƒ©ãƒƒã‚°å‰æ
   - ã‚¿ãƒƒãƒ—ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚µã‚¤ã‚ºãŒ44pxæœªæº€

4. **ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å•é¡Œ**
   - å›ºå®šé«˜ã•ï¼ˆh-screenï¼‰ã§ãƒã‚¹ãƒˆã—ãŸã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
   - ãƒ¢ãƒã‚¤ãƒ«ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼è¡¨ç¤º/éè¡¨ç¤ºã§ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆå´©ã‚Œ

---

## å¯¾å¿œæ–¹é‡

### ãƒ‡ã‚¶ã‚¤ãƒ³ãƒ‘ã‚¿ãƒ¼ãƒ³: **ãƒ¢ãƒ¼ãƒ€ãƒ«/ãƒ‰ãƒ­ãƒ¯ãƒ¼æ–¹å¼**

ãƒ¢ãƒã‚¤ãƒ«ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«UIã‚’å¤‰æ›´:
- **ã‚µã‚¤ãƒ‰ãƒãƒ¼**: å·¦ã‹ã‚‰ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¤ãƒ³ã™ã‚‹ãƒ‰ãƒ­ãƒ¯ãƒ¼
- **RAGãƒ‘ãƒãƒ«**: ä¸‹ã‹ã‚‰ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¢ãƒƒãƒ—ã™ã‚‹ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆ
- **ã‚¨ãƒ‡ã‚£ã‚¿**: ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³è¡¨ç¤º

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Header (Fixed)         â”‚  â† ã‚³ãƒ³ãƒ‘ã‚¯ãƒˆåŒ–
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚
â”‚                         â”‚
â”‚  Editor                 â”‚  â† ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³
â”‚  (Full Screen)          â”‚
â”‚                         â”‚
â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [â‰¡] [RAG] [Save]        â”‚  â† ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒœã‚¿ãƒ³
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

// ãƒ‰ãƒ­ãƒ¯ãƒ¼è¡¨ç¤ºæ™‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ã—  Files                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ file1.md              â”‚
â”‚ â€¢ file2.md              â”‚
â”‚ ğŸ“ docs/                â”‚
â”‚   â€¢ doc1.md             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## å®Ÿè£…ãƒ—ãƒ©ãƒ³

### ãƒ•ã‚§ãƒ¼ã‚º1: ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆè¨­å®š (å¿…é ˆ)

#### 1.1 Tailwind ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆæˆ¦ç•¥

```typescript
// tailwind.config.js
module.exports = {
  theme: {
    screens: {
      'sm': '640px',   // ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆç¸¦
      'md': '768px',   // ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆæ¨ª
      'lg': '1024px',  // PCå°
      'xl': '1280px',  // PCä¸­
      '2xl': '1536px', // PCå¤§
    }
  }
}
```

**ä½¿ç”¨æ–¹é‡**:
- `< md (768px)`: ãƒ¢ãƒã‚¤ãƒ«è¡¨ç¤ºï¼ˆãƒ‰ãƒ­ãƒ¯ãƒ¼/ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆï¼‰
- `>= md`: PCè¡¨ç¤ºï¼ˆç¾åœ¨ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼‰

#### 1.2 ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ä½œæˆ

`frontend/src/hooks/useMediaQuery.ts`:
```typescript
export const useMediaQuery = (query: string) => {
  const [matches, setMatches] = useState(false)

  useEffect(() => {
    const media = window.matchMedia(query)
    setMatches(media.matches)

    const listener = () => setMatches(media.matches)
    media.addEventListener('change', listener)
    return () => media.removeEventListener('change', listener)
  }, [query])

  return matches
}

// ä½¿ç”¨ä¾‹
const isMobile = useMediaQuery('(max-width: 768px)')
```

---

### ãƒ•ã‚§ãƒ¼ã‚º2: ãƒ˜ãƒƒãƒ€ãƒ¼ã®ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ (å„ªå…ˆåº¦: é«˜)

#### 2.1 Header ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¿®æ­£

**å¤‰æ›´å†…å®¹**:
```typescript
// frontend/src/components/organisms/Header/Header.tsx

return (
  <header className="bg-white shadow-sm border-b">
    <div className="flex items-center h-14 md:h-16 px-3 md:px-6">
      {/* ãƒ¢ãƒã‚¤ãƒ«: ãƒãƒ³ãƒãƒ¼ã‚¬ãƒ¼ + ã‚¿ã‚¤ãƒˆãƒ«ã®ã¿ */}
      {/* PC: ã™ã¹ã¦ã®æƒ…å ±ã‚’è¡¨ç¤º */}

      {/* Left: Sidebar Toggle */}
      <SidebarToggle
        isVisible={isVisible}
        onToggle={toggleVisibility}
        className="w-10 h-10 md:w-auto md:h-auto" // ãƒ¢ãƒã‚¤ãƒ«ã§å¤§ãã
      />

      {/* Center: Title + Repo (PC only) */}
      <div className="flex-1 ml-3 md:ml-4 overflow-hidden">
        <h1 className="text-base md:text-xl font-semibold text-gray-900 truncate">
          RAG Text Editor
        </h1>
        {selectedRepository && (
          <div className="hidden md:flex items-center space-x-2 mt-1">
            <div className="w-2 h-2 bg-green-500 rounded-full" />
            <span className="text-sm text-gray-600 truncate">
              {selectedRepository.full_name}
            </span>
          </div>
        )}
      </div>

      {/* Right: Actions */}
      <div className="flex items-center space-x-2 md:space-x-4">
        {/* RAG Toggle - ãƒ¢ãƒã‚¤ãƒ«ã¯ã‚¢ã‚¤ã‚³ãƒ³ã®ã¿ */}
        <button
          onClick={togglePanel}
          className="w-10 h-10 md:w-auto md:h-auto flex items-center justify-center md:px-3 md:py-1.5 rounded-lg"
        >
          <Search className="w-5 h-5 md:w-4 md:h-4" />
          <span className="hidden md:inline ml-2 text-sm">RAG Search</span>
        </button>

        {/* Avatar - ãƒ¢ãƒã‚¤ãƒ«ã¯å°ã•ã */}
        <Avatar
          src={profile.avatar_url}
          size={isMobile ? 'xs' : 'sm'}
          className="md:mr-2"
        />

        {/* User Info - PC only */}
        <div className="hidden md:block">
          <div className="text-sm font-medium">{profile.display_name}</div>
          <div className="text-xs text-gray-500">@{profile.github_username}</div>
        </div>
      </div>
    </div>

    {/* ãƒ¢ãƒã‚¤ãƒ«: ãƒªãƒã‚¸ãƒˆãƒªæƒ…å ±ã‚’2è¡Œç›®ã«è¡¨ç¤º */}
    {selectedRepository && (
      <div className="md:hidden px-3 py-2 bg-gray-50 border-t text-xs text-gray-600 flex items-center">
        <div className="w-1.5 h-1.5 bg-green-500 rounded-full mr-2" />
        <span className="truncate">{selectedRepository.full_name}</span>
      </div>
    )}
  </header>
)
```

---

### ãƒ•ã‚§ãƒ¼ã‚º3: ã‚µã‚¤ãƒ‰ãƒãƒ¼ã®ãƒ‰ãƒ­ãƒ¯ãƒ¼åŒ– (å„ªå…ˆåº¦: é«˜)

#### 3.1 ãƒ¢ãƒã‚¤ãƒ«ãƒ‰ãƒ­ãƒ¯ãƒ¼å®Ÿè£…

**å¤‰æ›´å†…å®¹**:
```typescript
// frontend/src/components/organisms/Sidebar/Sidebar.tsx

// ãƒ¢ãƒã‚¤ãƒ«åˆ¤å®š
const isMobile = useMediaQuery('(max-width: 768px)')

if (!isVisible) return null

return (
  <>
    {/* ãƒ¢ãƒã‚¤ãƒ«: ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */}
    {isMobile && (
      <div
        className="fixed inset-0 bg-black bg-opacity-50 z-40"
        onClick={closeContextMenu}
      />
    )}

    {/* ã‚µã‚¤ãƒ‰ãƒãƒ¼æœ¬ä½“ */}
    <div
      className={`
        ${isMobile
          ? 'fixed left-0 top-0 bottom-0 z-50 w-80 transform transition-transform duration-300'
          : 'relative'
        }
        bg-white border-r border-gray-200
      `}
      style={isMobile ? undefined : sidebarStyle}
    >
      {/* Header with Close Button (mobile only) */}
      {isMobile && (
        <div className="flex items-center justify-between px-4 py-3 border-b">
          <h2 className="text-lg font-semibold">Files</h2>
          <button
            onClick={() => setVisibility(false)}
            className="p-2 hover:bg-gray-100 rounded-lg"
          >
            <X className="w-5 h-5" />
          </button>
        </div>
      )}

      {/* Content */}
      <SidebarHeader
        onSearch={handleSearch}
        selectedFilePath={selectedFilePath}
        selectedFileType={findNodeType(files, selectedFilePath)}
      />
      <SidebarContent
        files={files}
        selectedFilePath={selectedFilePath}
        onFileSelect={(file) => {
          onFileSelect(file)
          // ãƒ¢ãƒã‚¤ãƒ«ã§ã¯ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠå¾Œã«ãƒ‰ãƒ­ãƒ¯ãƒ¼ã‚’é–‰ã˜ã‚‹
          if (isMobile && file.type === 'file') {
            setVisibility(false)
          }
        }}
        searchQuery={searchQuery}
        onCreateConfirm={handleCreateConfirm}
        onRenameConfirm={handleRenameConfirm}
      />
    </div>

    {/* PC: Resize Handle */}
    {!isMobile && <ResizeHandle />}
  </>
)
```

#### 3.2 ã‚µã‚¤ãƒ‰ãƒãƒ¼ã‚¹ãƒˆã‚¢ã®ä¿®æ­£

```typescript
// frontend/src/stores/sidebarStore.ts

// ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œã®åˆæœŸåŒ–
useEffect(() => {
  const handleResize = () => {
    const isMobile = window.innerWidth < 768
    if (isMobile && isVisible) {
      // ãƒ¢ãƒã‚¤ãƒ«ã§ã¯åˆæœŸçŠ¶æ…‹ã§éè¡¨ç¤º
      setVisibility(false)
    }
  }

  window.addEventListener('resize', handleResize)
  handleResize()

  return () => window.removeEventListener('resize', handleResize)
}, [])
```

---

### ãƒ•ã‚§ãƒ¼ã‚º4: RAGãƒ‘ãƒãƒ«ã®ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆåŒ– (å„ªå…ˆåº¦: ä¸­)

#### 4.1 ãƒ¢ãƒã‚¤ãƒ«ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆå®Ÿè£…

**å¤‰æ›´å†…å®¹**:
```typescript
// frontend/src/components/organisms/RAGPanel/RAGPanel.tsx

const isMobile = useMediaQuery('(max-width: 768px)')

if (!isVisible) return null

return (
  <>
    {/* ãƒ¢ãƒã‚¤ãƒ«: ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */}
    {isMobile && (
      <div
        className="fixed inset-0 bg-black bg-opacity-50 z-40"
        onClick={() => setVisible(false)}
      />
    )}

    {/* ãƒ‘ãƒãƒ«æœ¬ä½“ */}
    <div
      className={`
        ${isMobile
          ? 'fixed left-0 right-0 bottom-0 z-50 h-[70vh] rounded-t-2xl'
          : 'fixed right-0 top-16 bottom-0 z-30'
        }
        bg-white border-gray-200 shadow-xl transition-all duration-300 flex
      `}
      style={isMobile ? undefined : { width: `${width}px` }}
    >
      {/* PC: Resize Handle */}
      {!isMobile && (
        <div
          className="w-1 hover:w-2 cursor-col-resize bg-gray-200 hover:bg-blue-400"
          onMouseDown={handleMouseDown}
        />
      )}

      {/* Content */}
      <div className="flex-1 flex flex-col">
        {/* Header */}
        <div className="border-b border-gray-200 bg-gray-50">
          {/* ãƒ¢ãƒã‚¤ãƒ«: ãƒ‰ãƒ©ãƒƒã‚°ãƒãƒ³ãƒ‰ãƒ« */}
          {isMobile && (
            <div className="flex justify-center py-2">
              <div className="w-12 h-1 bg-gray-300 rounded-full" />
            </div>
          )}

          {/* Tabs */}
          <div className="flex items-center justify-between px-4 py-2">
            <div className="flex space-x-1">
              {tabs.map((tab) => (
                <button
                  key={tab.id}
                  onClick={() => setActiveTab(tab.id)}
                  className={`
                    flex items-center space-x-2 px-3 py-1.5 rounded-lg
                    ${activeTab === tab.id ? 'bg-blue-100 text-blue-700' : 'text-gray-600'}
                  `}
                >
                  <tab.icon className="w-4 h-4" />
                  <span className={isMobile ? 'text-xs' : 'text-sm'}>
                    {tab.label}
                  </span>
                </button>
              ))}
            </div>

            {/* Close Button */}
            <button onClick={() => setVisible(false)}>
              <X className="w-5 h-5" />
            </button>
          </div>
        </div>

        {/* Content */}
        <div className="flex-1 overflow-y-auto">
          {activeTab === 'search' && <RAGSearch repository={repository} />}
          {activeTab === 'chat' && <RAGChat repository={repository} />}
          {activeTab === 'sync' && <RAGSync repository={repository} />}
        </div>
      </div>
    </div>
  </>
)
```

---

### ãƒ•ã‚§ãƒ¼ã‚º5: ã‚¨ãƒ‡ã‚£ã‚¿ã®ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ– (å„ªå…ˆåº¦: é«˜)

#### 5.1 ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´

**å¤‰æ›´å†…å®¹**:
```typescript
// frontend/src/components/organisms/Editor/Editor.tsx

const isMobile = useMediaQuery('(max-width: 768px)')

return (
  <div className="h-full flex flex-col">
    {/* Tab Bar */}
    {openTabs.length > 0 && (
      <div className="border-b border-gray-200 bg-white">
        <div className="flex overflow-x-auto scrollbar-hide">
          {openTabs.map((tab) => (
            <button
              key={tab.id}
              onClick={() => setActiveTab(tab.id)}
              className={`
                flex items-center space-x-2 px-3 md:px-4 py-2 md:py-3
                border-b-2 whitespace-nowrap
                ${activeTab === tab.id
                  ? 'border-blue-500 text-blue-600'
                  : 'border-transparent text-gray-600'
                }
              `}
            >
              {/* isDirty indicator */}
              {tab.isDirty && (
                <div className="w-2 h-2 bg-orange-500 rounded-full" />
              )}

              {/* Tab name */}
              <span className="text-xs md:text-sm font-medium truncate max-w-[100px] md:max-w-[200px]">
                {tab.name}
              </span>

              {/* Close button - PC only */}
              {!isMobile && (
                <button
                  onClick={(e) => {
                    e.stopPropagation()
                    closeTab(tab.id)
                  }}
                  className="ml-2 hover:bg-gray-200 rounded p-0.5"
                >
                  <X className="w-3 h-3" />
                </button>
              )}
            </button>
          ))}
        </div>
      </div>
    )}

    {/* Editor Content */}
    <div className="flex-1 overflow-y-auto">
      {activeTab ? (
        <EditorContent activeTab={activeTab} isMobile={isMobile} />
      ) : (
        <EmptyState isMobile={isMobile} />
      )}
    </div>

    {/* ãƒ¢ãƒã‚¤ãƒ«: ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */}
    {isMobile && activeTab && (
      <div className="fixed bottom-6 right-6 flex flex-col space-y-3">
        {/* Save Button */}
        {activeTab.isDirty && (
          <button
            onClick={handleSave}
            className="w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg flex items-center justify-center"
          >
            <Save className="w-6 h-6" />
          </button>
        )}

        {/* Close Tab Button */}
        <button
          onClick={() => closeTab(activeTab.id)}
          className="w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center"
        >
          <X className="w-5 h-5" />
        </button>
      </div>
    )}
  </div>
)
```

#### 5.2 Novel ã‚¨ãƒ‡ã‚£ã‚¿ã®ãƒ¢ãƒã‚¤ãƒ«èª¿æ•´

```typescript
// frontend/src/components/organisms/Editor/EditorContent.tsx

<NovelWithMenu
  key={activeTab.id}
  content={parseToProseMirror(activeTab.content)}
  onChange={handleNovelChange}
  className={isMobile ? 'px-4 py-4' : 'px-8 py-6'} // ãƒ¢ãƒã‚¤ãƒ«ã§ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°å‰Šæ¸›
  editorProps={{
    attributes: {
      class: isMobile
        ? 'prose prose-sm max-w-none focus:outline-none min-h-[60vh]'
        : 'prose prose-lg max-w-none focus:outline-none min-h-screen'
    }
  }}
/>
```

---

### ãƒ•ã‚§ãƒ¼ã‚º6: ã‚¿ãƒƒãƒæ“ä½œã®æœ€é©åŒ– (å„ªå…ˆåº¦: ä¸­)

#### 6.1 ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®æ”¹å–„

**ç¾çŠ¶**: å³ã‚¯ãƒªãƒƒã‚¯ã®ã¿ï¼ˆãƒ¢ãƒã‚¤ãƒ«ã§ä½¿ãˆãªã„ï¼‰

**å¤‰æ›´å†…å®¹**:
```typescript
// frontend/src/components/organisms/Sidebar/FileTreeItem.tsx

const [longPressTimer, setLongPressTimer] = useState<NodeJS.Timeout | null>(null)

const handleTouchStart = (e: React.TouchEvent) => {
  const timer = setTimeout(() => {
    // é•·æŠ¼ã—æ¤œçŸ¥ (500ms)
    handleContextMenu({
      clientX: e.touches[0].clientX,
      clientY: e.touches[0].clientY,
      preventDefault: () => {},
      stopPropagation: () => {}
    } as any)
  }, 500)
  setLongPressTimer(timer)
}

const handleTouchEnd = () => {
  if (longPressTimer) {
    clearTimeout(longPressTimer)
    setLongPressTimer(null)
  }
}

return (
  <div
    onContextMenu={handleContextMenu}
    onTouchStart={handleTouchStart}
    onTouchEnd={handleTouchEnd}
    className="..."
  >
    {/* ... */}
  </div>
)
```

#### 6.2 ã‚¿ãƒƒãƒ—ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚µã‚¤ã‚ºã®æ‹¡å¤§

**å¤‰æ›´æ–¹é‡**:
- ã™ã¹ã¦ã®ãƒœã‚¿ãƒ³: æœ€ä½ 44px Ã— 44px
- ãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒªãƒ¼é …ç›®: é«˜ã• 44px
- ã‚¿ãƒ–: é«˜ã• 48px

```typescript
// ãƒ¢ãƒã‚¤ãƒ«ç”¨ã®ã‚¿ãƒƒãƒ—ã‚¿ãƒ¼ã‚²ãƒƒãƒˆèª¿æ•´
<button
  className={`
    ${isMobile ? 'min-w-[44px] min-h-[44px]' : 'px-3 py-1.5'}
    rounded-lg
  `}
>
  {/* ... */}
</button>
```

---

### ãƒ•ã‚§ãƒ¼ã‚º7: ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã®çµ±åˆ (å„ªå…ˆåº¦: é«˜)

#### 7.1 workspace/page.tsx ã®ä¿®æ­£

```typescript
// frontend/src/app/workspace/page.tsx

const isMobile = useMediaQuery('(max-width: 768px)')

return (
  <div className="h-screen bg-gray-50 flex flex-col">
    {/* Header */}
    <Header profile={profile} selectedRepository={selectedRepository} />

    {/* Main Content */}
    <div className="flex-1 flex overflow-hidden relative">
      {/* Sidebar - ãƒ¢ãƒã‚¤ãƒ«ã§ã¯ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã€PCã§ã¯é€šå¸¸è¡¨ç¤º */}
      {filesLoading ? (
        // Loading state
        !isMobile && isVisible && (
          <div className="w-80 bg-white border-r flex items-center justify-center">
            <div className="text-sm text-gray-500">Loading files...</div>
          </div>
        )
      ) : repositoryFiles ? (
        <Sidebar
          files={repositoryFiles.contents}
          selectedFilePath={selectedFile?.path}
          onFileSelect={handleFileSelect}
          repository={selectedRepository}
          onRefresh={() => refetchFiles()}
        />
      ) : null}

      {/* Editor - ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ */}
      <div className="flex-1 bg-white flex flex-col">
        <Editor />
      </div>

      {/* RAG Panel - ãƒ¢ãƒã‚¤ãƒ«ã§ã¯ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆã€PCã§ã¯å³ãƒ‘ãƒãƒ« */}
      <RAGPanel
        repository={selectedRepository ? `${selectedRepository.owner}/${selectedRepository.name}` : undefined}
      />
    </div>
  </div>
)
```

---

## è¿½åŠ æ©Ÿèƒ½

### 1. ã‚¹ãƒ¯ã‚¤ãƒ—ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼

**ã‚µã‚¤ãƒ‰ãƒãƒ¼é–‹é–‰**:
```typescript
// useSwipeGesture.ts
export const useSwipeGesture = (onSwipeRight: () => void, onSwipeLeft: () => void) => {
  const [touchStart, setTouchStart] = useState(0)
  const [touchEnd, setTouchEnd] = useState(0)

  const handleTouchStart = (e: TouchEvent) => {
    setTouchStart(e.targetTouches[0].clientX)
  }

  const handleTouchEnd = () => {
    if (touchStart - touchEnd > 50) {
      onSwipeLeft()
    }
    if (touchStart - touchEnd < -50) {
      onSwipeRight()
    }
  }

  return { handleTouchStart, handleTouchEnd }
}
```

### 2. ãƒ—ãƒ«ãƒˆã‚¥ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥

```typescript
// RAGSync ã§ã®å®Ÿè£…
const [isPulling, setIsPulling] = useState(false)
const [pullDistance, setPullDistance] = useState(0)

const handleTouchMove = (e: TouchEvent) => {
  const scrollTop = window.scrollY
  if (scrollTop === 0 && e.touches[0].clientY > touchStart) {
    const distance = e.touches[0].clientY - touchStart
    setPullDistance(Math.min(distance, 100))

    if (distance > 80) {
      setIsPulling(true)
    }
  }
}
```

### 3. ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

**ãƒœãƒˆãƒ ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³** (ã‚ªãƒ—ã‚·ãƒ§ãƒ³):
```typescript
// ç”»é¢ä¸‹éƒ¨ã«å›ºå®šã‚¿ãƒ–
<nav className="md:hidden fixed bottom-0 left-0 right-0 bg-white border-t z-30">
  <div className="flex justify-around py-2">
    <button onClick={() => setVisibility(true)}>
      <Menu className="w-6 h-6" />
      <span className="text-xs">Files</span>
    </button>
    <button onClick={() => setVisible(true)}>
      <Search className="w-6 h-6" />
      <span className="text-xs">Search</span>
    </button>
  </div>
</nav>
```

---

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨ã®æœ€é©åŒ–

1. **ç”»åƒã®é…å»¶èª­ã¿è¾¼ã¿**
   ```typescript
   <img loading="lazy" src={avatar_url} />
   ```

2. **ä»®æƒ³ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«**
   - ãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒªãƒ¼ãŒå¤§ãã„å ´åˆã€`react-window` ã‚’ä½¿ç”¨

3. **ã‚³ãƒ¼ãƒ‰ã‚¹ãƒ—ãƒªãƒƒãƒ†ã‚£ãƒ³ã‚°**
   ```typescript
   const NovelEditor = dynamic(() => import('./NovelEditor'), {
     loading: () => <div>Loading editor...</div>,
     ssr: false
   })
   ```

---

## ãƒ†ã‚¹ãƒˆæˆ¦ç•¥

### ãƒ‡ãƒã‚¤ã‚¹ãƒ†ã‚¹ãƒˆ

1. **å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ**
   - iPhone SE (375px)
   - iPhone 12/13/14 (390px)
   - iPhone 14 Pro Max (430px)
   - iPad (768px)
   - Android (å„ç¨®ã‚µã‚¤ã‚º)

2. **ãƒ–ãƒ©ã‚¦ã‚¶DevToolsãƒ†ã‚¹ãƒˆ**
   - Chrome DevTools: Device Mode
   - Safari Web Inspector: Responsive Design Mode

3. **è‡ªå‹•ãƒ†ã‚¹ãƒˆ**
   ```typescript
   // Playwright ã§ãƒ¢ãƒã‚¤ãƒ«ãƒ†ã‚¹ãƒˆ
   test('mobile sidebar opens on hamburger click', async ({ page }) => {
     await page.setViewportSize({ width: 375, height: 667 })
     await page.goto('/workspace')
     await page.click('[aria-label="Toggle sidebar"]')
     await expect(page.locator('aside')).toBeVisible()
   })
   ```

---

## ãƒ­ãƒ¼ãƒ«ã‚¢ã‚¦ãƒˆè¨ˆç”»

### ã‚¹ãƒ†ãƒƒãƒ—1: åŸºç¤å¯¾å¿œ (Week 1-2)
- [ ] ãƒ–ãƒ¬ãƒ¼ã‚¯ãƒã‚¤ãƒ³ãƒˆè¨­å®š
- [ ] Header ã®ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ
- [ ] Sidebar ã®ãƒ‰ãƒ­ãƒ¯ãƒ¼åŒ–
- [ ] ã‚¿ãƒƒãƒ—ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚µã‚¤ã‚ºèª¿æ•´

### ã‚¹ãƒ†ãƒƒãƒ—2: ã‚³ã‚¢æ©Ÿèƒ½ (Week 3-4)
- [ ] RAGPanel ã®ãƒœãƒˆãƒ ã‚·ãƒ¼ãƒˆåŒ–
- [ ] Editor ã®ãƒ¢ãƒã‚¤ãƒ«æœ€é©åŒ–
- [ ] ãƒ•ãƒ­ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³
- [ ] ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®é•·æŠ¼ã—å¯¾å¿œ

### ã‚¹ãƒ†ãƒƒãƒ—3: UXæ”¹å–„ (Week 5-6)
- [ ] ã‚¹ãƒ¯ã‚¤ãƒ—ã‚¸ã‚§ã‚¹ãƒãƒ£ãƒ¼
- [ ] ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³èª¿æ•´
- [ ] ãƒ¢ãƒã‚¤ãƒ«å°‚ç”¨ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
- [ ] å®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ + ä¿®æ­£

### ã‚¹ãƒ†ãƒƒãƒ—4: æœ€é©åŒ– (Week 7-8)
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- [ ] PWAå¯¾å¿œï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- [ ] ã‚ªãƒ•ãƒ©ã‚¤ãƒ³å¯¾å¿œï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
- [ ] æœ€çµ‚ãƒ†ã‚¹ãƒˆ + ãƒªãƒªãƒ¼ã‚¹

---

## æ‡¸å¿µäº‹é …ã¨ãƒªã‚¹ã‚¯

### æŠ€è¡“çš„èª²é¡Œ

1. **Novel ã‚¨ãƒ‡ã‚£ã‚¿ã®ãƒ¢ãƒã‚¤ãƒ«å¯¾å¿œ**
   - TipTap ã®ãƒ¢ãƒã‚¤ãƒ«äº’æ›æ€§
   - ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã®è¡¨ç¤ºæ–¹æ³•
   - ä»®æƒ³ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰å¯¾å¿œ

2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
   - å¤§ããªMarkdownãƒ•ã‚¡ã‚¤ãƒ«ã®ç·¨é›†
   - ãƒ•ã‚¡ã‚¤ãƒ«ãƒ„ãƒªãƒ¼ã®ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°
   - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³

3. **iOS Safari ã®åˆ¶ç´„**
   - 100vh å•é¡Œï¼ˆã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼åˆ†ã®é«˜ã•ï¼‰
   - ã‚¿ãƒƒãƒã‚¤ãƒ™ãƒ³ãƒˆã®åˆ¶é™
   - ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«æŒ™å‹•

### è§£æ±ºç­–

```typescript
// 100vh å•é¡Œã®è§£æ±º
const useViewportHeight = () => {
  useEffect(() => {
    const setVH = () => {
      const vh = window.innerHeight * 0.01
      document.documentElement.style.setProperty('--vh', `${vh}px`)
    }

    setVH()
    window.addEventListener('resize', setVH)
    return () => window.removeEventListener('resize', setVH)
  }, [])
}

// CSS
.h-screen-mobile {
  height: 100vh;
  height: calc(var(--vh, 1vh) * 100);
}
```

---

## æˆåŠŸæŒ‡æ¨™

### ãƒ¡ãƒˆãƒªã‚¯ã‚¹

1. **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œç‡**
   - ãƒ¢ãƒã‚¤ãƒ«ç”»é¢ã§å…¨æ©Ÿèƒ½ãŒä½¿ç”¨å¯èƒ½: 100%
   - ã‚¿ãƒƒãƒ—ã‚¿ãƒ¼ã‚²ãƒƒãƒˆã‚µã‚¤ã‚ºæº–æ‹ : 95%ä»¥ä¸Š

2. **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**
   - Lighthouse ãƒ¢ãƒã‚¤ãƒ«ã‚¹ã‚³ã‚¢: 90+
   - FCP (First Contentful Paint): < 1.5s
   - LCP (Largest Contentful Paint): < 2.5s

3. **ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£**
   - ã‚¿ã‚¹ã‚¯å®Œäº†ç‡ï¼ˆãƒ¢ãƒã‚¤ãƒ«ï¼‰: 90%ä»¥ä¸Š
   - ã‚¨ãƒ©ãƒ¼ç‡: < 5%

---

## å‚è€ƒãƒªãƒ³ã‚¯

- [Material Design: Responsive Layout Grid](https://material.io/design/layout/responsive-layout-grid.html)
- [Apple HIG: Layout](https://developer.apple.com/design/human-interface-guidelines/layout)
- [WCAG 2.1: Touch Target Size](https://www.w3.org/WAI/WCAG21/Understanding/target-size.html)
- [Next.js: Responsive Design](https://nextjs.org/docs/app/building-your-application/styling/tailwind-css)

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´10æœˆ5æ—¥
